<!DOCTYPE html>
<html lang="utf-8">
<head>
<meta charset="UTF-8">
<title>Document</title>
<link rel="stylesheet" href="../css/signup.css">
</head>
<body>
<form action="signupProcess.php" method="POST" id="signup-form">
	<div class="header">
		<div class="wrapper">
			<div class="content">
				<div>
					<img src="../assets/Logo2.png" id="logo">
				</div>
				<div id ="test">
					<h3>
					<label>아이디</label>
					</h3>
				</div>
				<div>
					<span><input type="text" id="fff_id" maxlength="20" placeholder="아이디를 입력해 주세요. ( 영어 소문자, 숫자만 입력 가능합니다. )" onkeyup="this.value=this.value.replace(/[^a-z0-9]/g,'')" require></span>
					<span><input type="hidden" id="decide_id" name="decide_id"></span>
					<span><input type="button" id="sss_id" value="중복 체크" onclick="checkid();"></span>
				</div>
				<div class="checktext">
					<p id="checktextP">
						<span id="decide" style='color:red;'>아이디 중복 여부를 확인해주세요.</span>
					</p>
				</div>
				<div>
					<h3>
					<label>닉네임</label>
					</h3>
				</div>
				<div>
					<span><input type="text" id="fff_ni" maxlength="20" placeholder="닉네임을 입력해 주세요."></span>
					<span><input type="hidden" id="decide_id2" name="decide_id2"></span>
					<span><input type="button" id="sss_ni" value="중복 체크" onclick="checkid2();"></span>
				</div>
				<div class="checktext">
					<p id="checktextP">
						<span id="decide2" style='color:red;'>닉네임 중복 여부를 확인해주세요.</span>
					</p>
				</div>
				<div>
					<h3>
					<label for="id">비밀번호</label>
					</h3>
					<span>
					<input type="password" name="password" id="fff21" maxlength="20">
					</span>
				</div>
				<div>
					<h3>
					<label for="id">비밀번호 재확인</label>
					</h3>
					<span>
					<input type="password" id="fff22" maxlength="20">
					</span>
				</div>
				<div>
					<input type="button" id="fff3" value="가입하기">
				</div>
                <footer>
		            <div class="copyright-wrap">
			            <span> MyongJini Copyright © MJCAMPUS Corp. All Rights Reserved.</span>
		            </div>
	            </footer>
			</div>
		</div>
	</div>
</form>
<script>

    function change2(){
           document.getElementById("decide2").innerHTML = "<span style='color:red;'>닉네임 중복 여부를 확인해주세요.</span>"
           document.getElementById("fff_ni").disabled = false
           document.getElementById("fff_ni").value = ""
           document.getElementById("sss_ni").value = "중복 체크"
           document.getElementById("sss_ni").setAttribute("onclick", "checkid2()")
       }
       function decide2(){
           document.getElementById("decide2").innerHTML = "<span style='color:red;'></span>"
           document.getElementById("decide_id2").value = document.getElementById("fff_ni").value
           document.getElementById("fff_ni").disabled = true
           document.getElementById("sss_ni").value = "닉네임 변경"
           document.getElementById("sss_ni").setAttribute("onclick", "change2()")
       }
       function checkid2(){
           var userid2 = document.getElementById("fff_ni").value;
           if(userid2)  //userid로 받음
           {
               url2 = "check2.php?userid2="+userid2;
               window.open(url2,"chkid","width=400,height=200");
           } else {
               alert("닉네임을 입력하세요.");
           }
       }
    function change(){
           document.getElementById("decide").innerHTML = "<span style='color:red;'>아이디 중복 여부를 확인해주세요.</span>"
           document.getElementById("fff_id").disabled = false
           document.getElementById("fff_id").value = ""
           document.getElementById("sss_id").value = "중복 체크"
           document.getElementById("sss_id").setAttribute("onclick", "checkid()")
       }
       function decide(){
           document.getElementById("decide").innerHTML = "<span style='color:red;'></span>"
           document.getElementById("decide_id").value = document.getElementById("fff_id").value
           document.getElementById("fff_id").disabled = true
           document.getElementById("sss_id").value = "아이디 변경"
           document.getElementById("sss_id").setAttribute("onclick", "change()")
       }
       function checkid(){
           var userid = document.getElementById("fff_id").value;
           if(userid)  //userid로 받음
           {
               url = "check.php?userid="+userid;
               window.open(url,"chkid","width=400,height=200");
           } else {
               alert("아이디를 입력하세요.");
           }
       }
       const signupForm = document.querySelector("#signup-form");
       const signupButton = document.querySelector("#fff3");
       const password = document.querySelector("#fff21");
       const passwordCheck = document.querySelector("#fff22");

        signupButton.addEventListener("click", function(e) {
        var userid = document.getElementById("fff_id").value;
        var userni = document.getElementById("fff_ni").value;
        var password = document.getElementById("fff21").value;
        var passwordCheck = document.getElementById("fff22").value;
        if(userid===""){
            alert("아이디를 입력해주세요")
        }else if(userni===""){
            alert("닉네임을 입력해주세요")
        }else if( (document.getElementById("fff_id").disabled === false) || (document.getElementById("fff_ni").disabled === false) ){
            alert("중복체크를 해주세요");
        }else if(password===""){
            alert("비밀번호를 입력해주세요")
        }else if(password != passwordCheck){
            alert("비밀번호가 서로 일치하지 않습니다");
        }else{
            signupForm.submit();
        }                                                  });
</script>
<body>
</html>